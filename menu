-- Загрузка вашей библиотеки
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/teppyboy/RbxScripts/master/Misc/UI_Libraries/Zypher/Library.lua"))()

-- Создание главного окна
local window = Library:CreateMain({
    projName = "PURY"
})

-- Функция для загрузки модулей
local function loadModule(url)
    local success, result = pcall(function()
        return loadstring(game:HttpGet(url))()
    end)
    return success and result or nil
end

-- Загружаем модули
local SpeedBoostModule = loadModule("https://raw.githubusercontent.com/leshk19029/sphirit/refs/heads/main/2")
local AntiEffectsModule = loadModule("https://raw.githubusercontent.com/leshk19029/testilka/refs/heads/main/1")
local ESPModule = loadModule("https://raw.githubusercontent.com/leshk19029/sphirit/refs/heads/main/esp")

-- Переменные для хранения состояния
local speedBoostEnabled = false
local currentSpeed = 25

-- Создаем вкладку Main
local mainTab = window:CreateCategory("Main")

-- Создаем секции
local movementSection = mainTab:CreateSection("Movement")
local playerSection = mainTab:CreateSection("Player")
local visualSection = mainTab:CreateSection("Visual")

-- Speed Boost - исправленная реализация
if SpeedBoostModule then
    -- Toggle для Speed Boost
    movementSection:Create("Toggle", "Speed Boost", function(state)
        speedBoostEnabled = state
        if state then
            -- Включаем speed boost с текущим значением
            SpeedBoostModule(currentSpeed)
        else
            -- Отключаем speed boost (устанавливаем нормальную скорость)
            SpeedBoostModule(16) -- Стандартная скорость в большинстве игр
        end
    end, {default = false})
    
    -- Slider для Speed Value
    movementSection:Create("Slider", "Speed Value", function(value)
        currentSpeed = value
        if speedBoostEnabled then
            -- Обновляем скорость, если boost включен
            SpeedBoostModule(value)
        end
    end, {min = 1, max = 45, default = 25, precise = false})
else
    warn("Speed Boost module not loaded")
end

-- Anti Effects
if AntiEffectsModule then
    playerSection:Create("Toggle", "Anti Effects", function(state)
        if AntiEffectsModule.toggleAntiEffects then
            AntiEffectsModule.toggleAntiEffects(state)
        end
    end, {default = false})
else
    warn("Anti Effects module not loaded")
end

-- ESP
if ESPModule then
    visualSection:Create("Toggle", "ESP", function(state)
        if ESPModule.ToggleAll then
            ESPModule.ToggleAll(state)
        end
    end, {default = false})
else
    warn("ESP module not loaded")
end

-- Hotkey для открытия/закрытия
local UIS = game:GetService("UserInputService")
UIS.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.LeftControl then
        window.Motherframe.Visible = not window.Motherframe.Visible
    end
end)

print("PURY Menu Loaded!")
