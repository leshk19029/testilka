local Library = loadstring(
    game:HttpGet(
        'https://raw.githubusercontent.com/leshk19029/testilka/refs/heads/main/library'
    )
)()
local SpeedBoostModule = loadstring(
    game:HttpGet(
        'https://raw.githubusercontent.com/leshk19029/testilka/refs/heads/main/speed'
    )
)()
local ESPModule = loadstring(
    game:HttpGet(
        'https://raw.githubusercontent.com/leshk19029/testilka/refs/heads/main/esp'
    )
)()
local AntiEffectsModule = loadstring(
    game:HttpGet(
        'https://raw.githubusercontent.com/leshk19029/testilka/refs/heads/main/antieffects'
    )
)()

local Window = Library:CreateMain({
    projName = 'pury',
    Resizable = true,
    MinSize = UDim2.new(0, 700, 0, 460),
    MaxSize = UDim2.new(0, 1000, 0, 600),
})

local MainTab = Window:CreateCategory('Main')
local MainSection = MainTab:CreateSection('Functions')

-- Anti Effects Toggle
local AntiEffectsToggle = MainSection:Create(
    'Toggle',
    'Anti Effects',
    function(state)
        if state then
            AntiEffectsModule()
        end
    end,
    {
        default = false,
    }
)

-- Speed Boost Toggle
local SpeedBoostToggle = MainSection:Create(
    'Toggle',
    'Speed Boost',
    function(state)
        SpeedBoostModule:SetEnabled(state)
    end,
    {
        default = false,
    }
)

-- Speed Value Slider
local SpeedSlider = MainSection:Create('Slider', 'Speed Value', function(value)
    SpeedBoostModule:SetSpeed(value)
    if SpeedBoostModule.Enabled then
        SpeedBoostModule:Disable()
        SpeedBoostModule:Enable()
    end
end, {
    min = 1,
    max = 45,
    default = 16,
    precise = true,
})

-- ESP Toggle
local ESPToggle = MainSection:Create('Toggle', 'ESP', function(state)
    ESPModule.ToggleAll(state)
end, {
    default = false,
})

-- Float Toggle (ленивая загрузка)
local FloatModule = nil
local floatLoaded = false
local FloatToggle = MainSection:Create('Toggle', 'Float', function(state)
    if state and not floatLoaded then
        FloatModule = loadstring(
            game:HttpGet(
                'https://raw.githubusercontent.com/leshk19029/testilka/refs/heads/main/gravity'
            )
        )()
        floatLoaded = true
    end

    if floatLoaded then
        FloatModule:Toggle(state)
    end
end, {
    default = false,
})

-- FPS Devouver Toggle (ленивая загрузка)
local FPSDevouverModule = nil
local fpsDevouverLoaded = false
local FPSDevouverToggle = MainSection:Create(
    'Toggle',
    'FPS Devouver',
    function(state)
        if state and not fpsDevouverLoaded then
            -- Загружаем FPS Devouver скрипт с GitHub
            FPSDevouverModule = loadstring(
                game:HttpGet(
                    'https://raw.githubusercontent.com/leshk19029/testilka/refs/heads/main/fps'
                )
            )()
            fpsDevouverLoaded = true
        end

        if fpsDevouverLoaded then
            FPSDevouverModule:Toggle(state)
        end
    end,
    {
        default = false,
    }
)
