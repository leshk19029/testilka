-- =========================================================
-- Brainrot Ultimate Anti-Hit: No Collision & Ray Ignore
-- –í–µ—Ä—Å–∏—è 2.0: –° –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ö–æ–¥—å–±—ã –∏ –±–∏–Ω–¥–æ–º –Ω–∞ V
-- =========================================================

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local Backpack = player:WaitForChild("Backpack")
local Character = player.Character or player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid", 10)
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart", 10)
local UserInputService = game:GetService("UserInputService")

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local IS_ACTIVE = false  -- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–∫–ª—é—á–µ–Ω–æ
local ANTI_HIT_ENABLED = false
local RUN_ANIMATION_ID = 2510235062
local WALK_SPEED = 16
local JUMP_POWER = 50
local animTrack = nil
local originalPosition = HumanoidRootPart.Position

-- –î–ª—è –∞–Ω—Ç–∏—Ö–∏—Ç–∞
local hitboxDisabled = false
local originalProperties = {}
local antiHitCollisionGroup = "AntiHitGroup_" .. math.random(10000, 99999)

-- –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∫–æ–ª–ª–∏–∑–∏–æ–Ω–Ω—É—é –≥—Ä—É–ø–ø—É
if not game:GetService("PhysicsService"):IsCollisionGroupRegistered(antiHitCollisionGroup) then
    game:GetService("PhysicsService"):RegisterCollisionGroup(antiHitCollisionGroup)
    game:GetService("PhysicsService"):CollisionGroupSetCollidable(antiHitCollisionGroup, "Default", false)
end

-- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π
local function saveOriginalProperties()
    originalProperties = {}
    for _, part in ipairs(Character:GetDescendants()) do
        if part:IsA("BasePart") then
            originalProperties[part] = {
                CanCollide = part.CanCollide,
                CanTouch = part.CanTouch,
                CanQuery = part.CanQuery,
                Transparency = part.Transparency,
                CollisionGroup = part.CollisionGroupId
            }
        end
    end
end

-- –î–µ–ª–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –Ω–µ—É—è–∑–≤–∏–º—ã–º
local function enableAntiHit()
    if hitboxDisabled then return end
    
    pcall(function()
        saveOriginalProperties()
        
        -- –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω—Ç–∏—Ö–∏—Ç –∫–æ –≤—Å–µ–º —á–∞—Å—Ç—è–º
        for _, part in ipairs(Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
                part.CanTouch = false
                part.CanQuery = false
                part.Transparency = 0.3 -- –õ–µ–≥–∫–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –≤–∏–∑—É–∞–ª–∞
                part.CollisionGroupId = game:GetService("PhysicsService"):GetCollisionGroupId(antiHitCollisionGroup)
                
                -- –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ —Å–∏–ª—ã
                part.Velocity = Vector3.new(0, 0, 0)
                part.RotVelocity = Vector3.new(0, 0, 0)
            end
        end
        
        -- –Ø–∫–æ—Ä—å —á—Ç–æ–±—ã –Ω–µ –ø–∞–¥–∞—Ç—å (–Ω–æ —Ä–∞–∑—Ä–µ—à–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ)
        HumanoidRootPart.Anchored = false
        
        hitboxDisabled = true
        ANTI_HIT_ENABLED = true
        print("üõ°Ô∏è –ê–Ω—Ç–∏—Ö–∏—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω: –∫–æ–ª–ª–∏–∑–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã")
    end)
end

-- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
local function disableAntiHit()
    if not hitboxDisabled then return end
    
    pcall(function()
        for part, properties in pairs(originalProperties) do
            if part and part.Parent then
                part.CanCollide = properties.CanCollide
                part.CanTouch = properties.CanTouch
                part.CanQuery = properties.CanQuery
                part.Transparency = properties.Transparency
                part.CollisionGroupId = properties.CollisionGroup
            end
        end
        
        HumanoidRootPart.Anchored = false
        
        hitboxDisabled = false
        ANTI_HIT_ENABLED = false
        print("üõ°Ô∏è –ê–Ω—Ç–∏—Ö–∏—Ç –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω")
    end)
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
local function playRunAnimation()
    if animTrack and animTrack.IsPlaying then animTrack:Stop() end
    local success, err = pcall(function()
        local animation = Instance.new("Animation")
        animation.AnimationId = "rbxassetid://" .. RUN_ANIMATION_ID
        animTrack = Humanoid:LoadAnimation(animation)
        animTrack:Play(0.1)
        animTrack.Looped = true
    end)
    if success then
        print("Run animation started")
    else
        warn("Animation error: " .. (err or "Unknown"))
    end
end

-- –°—Ç–∞—Ä—Ç —Ä–µ–∂–∏–º–∞ –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏
local function startAntiHitMode()
    if not Humanoid or not HumanoidRootPart or not Character.Parent then return end
    
    originalPosition = HumanoidRootPart.Position
    
    -- –í–∫–ª—é—á–∞–µ–º –∞–Ω—Ç–∏—Ö–∏—Ç
    enableAntiHit()
    
    -- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ
    Humanoid.WalkSpeed = WALK_SPEED  -- –†–∞–∑—Ä–µ—à–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
    Humanoid.JumpPower = JUMP_POWER  -- –†–∞–∑—Ä–µ—à–∞–µ–º –ø—Ä—ã–∂–∫–∏
    
    playRunAnimation()
    
    print("üîí –†–µ–∂–∏–º –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω")
    print("üö∂ –í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è")
    print("üéØ –ù–µ—É—è–∑–≤–∏–º –∫ —É—Ä–æ–Ω—É –∏ –∫–æ–ª–ª–∏–∑–∏—è–º")
end

-- –°—Ç–æ–ø —Ä–µ–∂–∏–º–∞ –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏
local function stopAntiHitMode()
    if not Humanoid or not HumanoidRootPart or not Character.Parent then return end
    
    -- –í—ã–∫–ª—é—á–∞–µ–º –∞–Ω—Ç–∏—Ö–∏—Ç
    disableAntiHit()
    
    -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    Humanoid.WalkSpeed = 16
    Humanoid.JumpPower = 50
    if animTrack then animTrack:Stop() end
    
    print("üîì –†–µ–∂–∏–º –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω")
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è (—Ä–∞–∑—Ä–µ—à–∞–µ–º —Ö–æ–¥—å–±—É –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –∞–Ω—Ç–∏—Ö–∏—Ç–µ)
local function handleMovement()
    if IS_ACTIVE and ANTI_HIT_ENABLED then
        -- –†–∞–∑—Ä–µ—à–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
        Humanoid.WalkSpeed = WALK_SPEED
        Humanoid.JumpPower = JUMP_POWER
        
        -- –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
        HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
        HumanoidRootPart.RotVelocity = Vector3.new(0, 0, 0)
    end
end

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
RunService.Heartbeat:Connect(function()
    if IS_ACTIVE and ANTI_HIT_ENABLED and HumanoidRootPart and HumanoidRootPart.Parent then
        handleMovement()
    end
end)

-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–∞ V
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.V then
        IS_ACTIVE = not IS_ACTIVE
        
        if IS_ACTIVE then
            startAntiHitMode()
        else
            stopAntiHitMode()
        end
        
        print("–†–µ–∂–∏–º –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏: " .. (IS_ACTIVE and "–í–ö–õ" or "–í–´–ö–õ"))
    end
end)

-- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ –±—ç–∫–ø–∞–∫–µ
Backpack.ChildAdded:Connect(function(tool)
    if not IS_ACTIVE or not tool or not tool:IsA("Tool") then return end
    if tool.Name:lower():find("brainrot") then
        task.wait(0.5)
        if IS_ACTIVE then
            startAntiHitMode()
        end
    end
end)

Backpack.ChildRemoved:Connect(function(tool)
    if not tool or not tool:IsA("Tool") then return end
    if tool.Name:lower():find("brainrot") then
        if IS_ACTIVE then
            stopAntiHitMode()
        end
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ—Å–ø–∞—É–Ω–∞
player.CharacterAdded:Connect(function(newCharacter)
    Character = newCharacter
    task.wait(1)
    Humanoid = Character:WaitForChild("Humanoid", 10)
    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart", 10)
    
    hitboxDisabled = false
    ANTI_HIT_ENABLED = false
    
    -- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –∫–æ–ª–ª–∏–∑–∏–æ–Ω–Ω—É—é –≥—Ä—É–ø–ø—É –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    antiHitCollisionGroup = "AntiHitGroup_" .. math.random(10000, 99999)
    if not game:GetService("PhysicsService"):IsCollisionGroupRegistered(antiHitCollisionGroup) then
        game:GetService("PhysicsService"):RegisterCollisionGroup(antiHitCollisionGroup)
        game:GetService("PhysicsService"):CollisionGroupSetCollidable(antiHitCollisionGroup, "Default", false)
    end
    
    if IS_ACTIVE then
        local tool = Backpack:FindFirstChildOfClass("Tool")
        if tool and tool.Name:lower():find("brainrot") then
            task.wait(2)
            startAntiHitMode()
        end
    end
end)

print("üéØ Brainrot Ultimate Anti-Hit –∑–∞–≥—Ä—É–∂–µ–Ω!")
print("üõ°Ô∏è CanCollide=false, CanTouch=false, CanQuery=false")
print("üö´ –ù–µ—É—è–∑–≤–∏–º –∫ –ª—É—á–∞–º, —Ö–∏—Ç–±–æ–∫—Å–∞–º –∏ –∫–æ–ª–ª–∏–∑–∏—è–º")
print("üéÆ V - –í–∫–ª/–í—ã–∫–ª —Ä–µ–∂–∏–º –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏")
print("üö∂ –í—ã –º–æ–∂–µ—Ç–µ —Ö–æ–¥–∏—Ç—å –∏ –ø—Ä—ã–≥–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏")
print("‚ö° –ê–Ω—Ç–∏—Ö–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–∑—è—Ç–∏–∏ Brainrot")
