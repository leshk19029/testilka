-- =========================================================
-- Ultimate Fake Position: Client-Only Decoy
-- =========================================================

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local Character = player.Character or player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local IS_ACTIVE = false
local DECOY_DURATION = 8 -- —Å–µ–∫—É–Ω–¥
local decoy = nil
local originalPosition = Vector3.new()
local originalTransparency = {}

-- –°–æ–∑–¥–∞–µ–º —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—É—é —Ñ–µ–π–∫–æ–≤—É—é –∫–æ–ø–∏—é
local function createRealisticDecoy()
    if decoy then decoy:Destroy() end
    
    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é
    originalPosition = HumanoidRootPart.Position
    
    -- –°–æ–∑–¥–∞–µ–º –º–æ–¥–µ–ª—å-–∫–æ–ø–∏—é
    decoy = Instance.new("Model")
    decoy.Name = "FakeDecoy_" .. player.Name
    
    -- –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ —á–∞—Å—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    for _, child in ipairs(Character:GetChildren()) do
        if child:IsA("BasePart") or child:IsA("MeshPart") then
            local clone = child:Clone()
            clone:ClearAllChildren() -- –£–±–∏—Ä–∞–µ–º –¥–æ—á–µ—Ä–Ω–∏–µ –æ–±—ä–µ–∫—Ç—ã
            
            -- –î–µ–ª–∞–µ–º —á–∞—Å—Ç–∏ –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º–∏ –∏ –Ω–µ–≤–∏–¥–∏–º—ã–º–∏ –¥–ª—è –ª—É—á–µ–π
            clone.CanCollide = false
            clone.CanTouch = false
            clone.CanQuery = false
            clone.Transparency = 0.6
            clone.Color = Color3.fromRGB(255, 150, 50)
            clone.Material = Enum.Material.Neon
            
            -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
            originalTransparency[clone] = child.Transparency
            
            clone.Parent = decoy
        elseif child:IsA("Accessory") then
            -- –ö–æ–ø–∏—Ä—É–µ–º –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã
            local accessory = child:Clone()
            if accessory:FindFirstChildWhichIsA("BasePart") then
                local handle = accessory:FindFirstChildWhichIsA("BasePart")
                handle.CanCollide = false
                handle.CanTouch = false
                handle.CanQuery = false
                handle.Transparency = 0.6
                handle.Color = Color3.fromRGB(255, 150, 50)
            end
            accessory.Parent = decoy
        end
    end
    
    -- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –¥–µ–∫–æ–π
    decoy:SetPrimaryPartCFrame(HumanoidRootPart.CFrame)
    decoy.Parent = Workspace
    
    -- –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–µ—á–µ–Ω–∏–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã
    local glow = Instance.new("PointLight")
    glow.Brightness = 3
    glow.Range = 8
    glow.Color = Color3.fromRGB(255, 100, 0)
    glow.Parent = decoy.PrimaryPart
    
    -- –≠—Ñ—Ñ–µ–∫—Ç –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è
    local disappearTween = TweenService:Create(decoy.PrimaryPart, TweenInfo.new(DECOY_DURATION - 1, Enum.EasingStyle.Quad), {
        Transparency = 1,
        Size = Vector3.new(0.1, 0.1, 0.1)
    })
    
    disappearTween:Play()
    
    return decoy
end

-- –î–µ–ª–∞–µ–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ "–ø—Ä–∏–∑—Ä–∞–∫–æ–º"
local function makeCharacterGhost()
    for _, part in ipairs(Character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.LocalTransparencyModifier = 0.7 -- –í–∏–¥–∏–º —Å–µ–±—è –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º
        end
    end
end

-- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å
local function restoreCharacterVisibility()
    for _, part in ipairs(Character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.LocalTransparencyModifier = 0
        end
    end
end

-- –ó–∞–ø—É—Å–∫ —Ä–µ–∂–∏–º–∞ —Ñ–µ–π–∫–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
local function startFakePosition()
    if IS_ACTIVE or not Character or not HumanoidRootPart then return end
    IS_ACTIVE = true
    
    -- –°–æ–∑–¥–∞–µ–º —Ñ–µ–π–∫–æ–≤—É—é –∫–æ–ø–∏—é
    createRealisticDecoy()
    
    -- –î–µ–ª–∞–µ–º —Å–µ–±—è –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º
    makeCharacterGhost()
    
    print("üé≠ –§–µ–π–∫–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞! –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: " .. DECOY_DURATION .. "—Å–µ–∫")
    
    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
    task.delay(DECOY_DURATION, function()
        if IS_ACTIVE then
            stopFakePosition()
        end
    end)
end

-- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞
local function stopFakePosition()
    if not IS_ACTIVE then return end
    IS_ACTIVE = false
    
    -- –£–¥–∞–ª—è–µ–º –¥–µ–∫–æ–π
    if decoy then
        decoy:Destroy()
        decoy = nil
    end
    
    -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å
    restoreCharacterVisibility()
    
    print("üé≠ –§–µ–π–∫–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞")
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞
UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    
    if input.KeyCode == Enum.KeyCode.V then
        if IS_ACTIVE then
            stopFakePosition()
        else
            startFakePosition()
        end
    end
end)

-- –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–ª–∏ —Å–º–µ—Ä—Ç–∏
player.CharacterRemoving:Connect(function()
    stopFakePosition()
end)

Character:GetPropertyChangedSignal("Parent"):Connect(function()
    if Character.Parent == nil then
        stopFakePosition()
    end
end)

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–µ–∫–æ—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞ –º–µ—Å—Ç–µ)
RunService.Heartbeat:Connect(function()
    if IS_ACTIVE and decoy and decoy.PrimaryPart then
        -- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–±–æ–ª—å—à—É—é –∞–Ω–∏–º–∞—Ü–∏—é –∏–ª–∏ –ø—É–ª—å—Å–∞—Ü–∏—é
        decoy.PrimaryPart.CFrame = CFrame.new(originalPosition) * CFrame.Angles(0, math.sin(tick() * 2) * 0.1, 0)
    end
end)

print("üé≠ Ultimate Fake Position –∑–∞–≥—Ä—É–∂–µ–Ω!")
print("üîë V - –°–æ–∑–¥–∞—Ç—å —Ñ–µ–π–∫–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –Ω–∞ " .. DECOY_DURATION .. " —Å–µ–∫—É–Ω–¥")
print("üëª –î—Ä—É–≥–∏–µ —É–≤–∏–¥—è—Ç –≤–∞—à—É –∫–æ–ø–∏—é –Ω–∞ —Å—Ç–∞—Ä–æ–º –º–µ—Å—Ç–µ")
print("‚ö° –í—ã —Å–º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –∫–∞–∫ '–ø—Ä–∏–∑—Ä–∞–∫'")
print("üí° –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ!")

-- –í–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Fake Position Loaded",
    Text = "Press V to create decoy for " .. DECOY_DURATION .. " seconds",
    Duration = 5
})
