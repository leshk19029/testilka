-- =========================================================
-- Brainrot Ultimate Anti-Hit: No Collision & Ray Ignore
-- =========================================================

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local Backpack = player:WaitForChild("Backpack")
local Character = player.Character or player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid", 10)
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart", 10)
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local IS_ACTIVE = true
local RUN_ANIMATION_ID = 2510235062
local animTrack = nil
local originalPosition = HumanoidRootPart.Position

-- –°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "BrainrotUI"
ScreenGui.Parent = player.PlayerGui

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 200, 0, 80)
MainFrame.Position = UDim2.new(0, 10, 0, 10)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Text = "Brainrot Anti-Hit"
Title.Font = Enum.Font.GothamBold
Title.Parent = MainFrame

local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0.9, 0, 0, 30)
ToggleButton.Position = UDim2.new(0.05, 0, 0, 40)
ToggleButton.BackgroundColor3 = Color3.fromRGB(60, 180, 80)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Text = "–ê–ö–¢–ò–í–ù–û"
ToggleButton.Font = Enum.Font.Gotham
ToggleButton.Parent = MainFrame

-- –î–ª—è –∞–Ω—Ç–∏—Ö–∏—Ç–∞
local hitboxDisabled = false
local originalProperties = {}

-- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π
local function saveOriginalProperties()
    originalProperties = {}
    for _, part in ipairs(Character:GetDescendants()) do
        if part:IsA("BasePart") then
            originalProperties[part] = {
                CanCollide = part.CanCollide,
                CanTouch = part.CanTouch,
                CanQuery = part.CanQuery,
                Transparency = part.Transparency,
                CollisionGroup = part.CollisionGroupId
            }
        end
    end
end

-- –î–µ–ª–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –Ω–µ—É—è–∑–≤–∏–º—ã–º
local function enableAntiHit()
    if hitboxDisabled then return end
    
    pcall(function()
        saveOriginalProperties()
        
        -- –ú–µ–Ω—è–µ–º –∫–æ–ª–ª–∏–∑–∏–æ–Ω–Ω—É—é –≥—Ä—É–ø–ø—É
        local newCollisionGroup = "AntiHitGroup_" .. math.random(10000, 99999)
        
        -- –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∫–æ–ª–ª–∏–∑–∏–æ–Ω–Ω—É—é –≥—Ä—É–ø–ø—É
        if not game:GetService("PhysicsService"):IsCollisionGroupRegistered(newCollisionGroup) then
            game:GetService("PhysicsService"):RegisterCollisionGroup(newCollisionGroup)
            game:GetService("PhysicsService"):CollisionGroupSetCollidable(newCollisionGroup, "Default", false)
            game:GetService("PhysicsService"):CollisionGroupSetCollidable(newCollisionGroup, newCollisionGroup, false)
        end
        
        -- –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ –≤—Å–µ–º —á–∞—Å—Ç—è–º
        for _, part in ipairs(Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
                part.CanTouch = false
                part.CanQuery = false
                part.Transparency = 0.5 -- –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –¥–ª—è –≤–∏–∑—É–∞–ª–∞
                part.CollisionGroup = newCollisionGroup
                
                -- –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ —Å–∏–ª—ã
                part.Velocity = Vector3.new(0, 0, 0)
                part.RotVelocity = Vector3.new(0, 0, 0)
            end
        end
        
        -- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–º–µ—Ä—Ç–∏ - –æ—Ç–∫–ª—é—á–∞–µ–º —á–µ–ª–æ–≤–µ—á–∫–∞
        if Humanoid then
            Humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, false)
            Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown, false)
            Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll, false)
            Humanoid.BreakJointsOnDeath = false
        end
        
        -- –Ø–∫–æ—Ä—å —á—Ç–æ–±—ã –Ω–µ –ø–∞–¥–∞—Ç—å
        HumanoidRootPart.Anchored = true
        
        hitboxDisabled = true
        print("üõ°Ô∏è –ê–Ω—Ç–∏—Ö–∏—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω: –∫–æ–ª–ª–∏–∑–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã")
    end)
end

-- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
local function disableAntiHit()
    if not hitboxDisabled then return end
    
    pcall(function()
        for part, properties in pairs(originalProperties) do
            if part and part.Parent then
                part.CanCollide = properties.CanCollide
                part.CanTouch = properties.CanTouch
                part.CanQuery = properties.CanQuery
                part.Transparency = properties.Transparency
                part.CollisionGroupId = properties.CollisionGroup
            end
        end
        
        -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ–ª–æ–≤–µ—á–∫–∞
        if Humanoid then
            Humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, true)
            Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown, true)
            Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll, true)
            Humanoid.BreakJointsOnDeath = true
        end
        
        HumanoidRootPart.Anchored = false
        
        hitboxDisabled = false
        print("üõ°Ô∏è –ê–Ω—Ç–∏—Ö–∏—Ç –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω")
    end)
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
local function playRunAnimation()
    if animTrack and animTrack.IsPlaying then animTrack:Stop() end
    local success, err = pcall(function()
        local animation = Instance.new("Animation")
        animation.AnimationId = "rbxassetid://" .. RUN_ANIMATION_ID
        animTrack = Humanoid:LoadAnimation(animation)
        animTrack:Play(0.1)
        animTrack.Looped = true
    end)
    if success then
        print("Run animation started")
    else
        warn("Animation error: " .. (err or "Unknown"))
    end
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞
local function createSpawnMarker(position)
    local marker = Instance.new("Part")
    marker.Size = Vector3.new(2, 2, 2)
    marker.Position = position
    marker.Anchored = true
    marker.CanCollide = false
    marker.Material = EnumMaterial.Neon
    marker.Color = Color3.fromRGB(0, 255, 0)
    marker.Transparency = 0.3
    marker.Parent = Workspace
    
    -- –£–¥–∞–ª—è–µ–º –º–∞—Ä–∫–µ—Ä —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    game:GetService("Debris"):AddItem(marker, 3)
    return marker
end

-- –ù–∞–π—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Ä–∞–¥–∏—É—Å–æ–º 30 studs
local function findSafeSpawnPosition()
    local center = HumanoidRootPart.Position
    local radius = 30
    
    -- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —É–≥–æ–ª –æ—Ç 0 –¥–æ 360 –≥—Ä–∞–¥—É—Å–æ–≤
    local randomAngle = math.random() * math.pi * 2
    
    -- –í—ã—á–∏—Å–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏
    local x = center.X + math.cos(randomAngle) * radius
    local z = center.Z + math.sin(randomAngle) * radius
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ —Å—Ç–µ–Ω—ã/–æ–±—ä–µ–∫—Ç–∞
    local params = RaycastParams.new()
    params.FilterType = Enum.RaycastFilterType.Blacklist
    params.FilterDescendantsInstances = {Character}
    
    -- –ë—Ä–æ—Å–∞–µ–º –ª—É—á —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã –∑–µ–º–ª–∏
    local raycastResult = workspace:Raycast(Vector3.new(x, center.Y + 50, z), Vector3.new(0, -100, 0), params)
    
    if raycastResult and raycastResult.Instance then
        -- –ù–∞—à–ª–∏ –∑–µ–º–ª—é - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –Ω–µ–º–Ω–æ–≥–æ –≤—ã—à–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
        return raycastResult.Position + Vector3.new(0, 3, 0)
    else
        -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –∑–µ–º–ª—é, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã—Å–æ—Ç—É –∏–≥—Ä–æ–∫–∞
        return Vector3.new(x, center.Y, z)
    end
end

-- –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏
local function teleportToRandomPosition()
    if not IS_ACTIVE or not HumanoidRootPart or not HumanoidRootPart.Parent then return end
    
    -- –ù–∞—Ö–æ–¥–∏–º –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏
    local newPosition = findSafeSpawnPosition()
    
    -- –°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ä
    createSpawnMarker(newPosition)
    
    -- –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    HumanoidRootPart.CFrame = CFrame.new(newPosition)
    originalPosition = newPosition
    
    print("üì° –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø–æ–∑–∏—Ü–∏—é –≤ —Ä–∞–¥–∏—É—Å–µ 30 studs")
end

-- –°—Ç–∞—Ä—Ç —Ä–µ–∂–∏–º–∞
local function startRunMode()
    if not Humanoid or not HumanoidRootPart or not Character.Parent then return end
    
    originalPosition = HumanoidRootPart.Position
    
    -- –í–∫–ª—é—á–∞–µ–º –∞–Ω—Ç–∏—Ö–∏—Ç –î–û –≤—Å–µ–≥–æ
    enableAntiHit()
    
    -- –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    Humanoid.WalkSpeed = 16
    Humanoid.JumpPower = 50
    playRunAnimation()
    
    print("Run mode activated: Ultimate anti-hit enabled")
end

-- –°—Ç–æ–ø —Ä–µ–∂–∏–º–∞
local function stopRunMode()
    if not Humanoid or not HumanoidRootPart or not Character.Parent then return end
    
    -- –í—ã–∫–ª—é—á–∞–µ–º –∞–Ω—Ç–∏—Ö–∏—Ç
    disableAntiHit()
    
    -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    Humanoid.WalkSpeed = 16
    Humanoid.JumpPower = 50
    if animTrack then animTrack:Stop() end
    
    print("Run mode deactivated")
end

-- –§–∏–∫—Å–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏
RunService.Heartbeat:Connect(function()
    if IS_ACTIVE and HumanoidRootPart and HumanoidRootPart.Parent then
        HumanoidRootPart.CFrame = CFrame.new(originalPosition)
        HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
        HumanoidRootPart.RotVelocity = Vector3.new(0, 0, 0)
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if IS_ACTIVE and input.UserInputType == Enum.UserInputType.MouseButton1 then
        teleportToRandomPosition()
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
ToggleButton.MouseButton1Click:Connect(function()
    IS_ACTIVE = not IS_ACTIVE
    
    if IS_ACTIVE then
        ToggleButton.BackgroundColor3 = Color3.fromRGB(60, 180, 80)
        ToggleButton.Text = "–ê–ö–¢–ò–í–ù–û"
        local tool = Backpack:FindFirstChildOfClass("Tool")
        if tool and tool.Name:lower():find("brainrot") then
            startRunMode()
        end
    else
        ToggleButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
        ToggleButton.Text = "–ù–ï–ê–ö–¢–ò–í–ù–û"
        stopRunMode()
    end
end)

-- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Backpack
Backpack.ChildAdded:Connect(function(tool)
    if not IS_ACTIVE or not tool or not tool:IsA("Tool") then return end
    if tool.Name:lower():find("brainrot") then
        task.wait(0.5)
        startRunMode()
    end
end)

Backpack.ChildRemoved:Connect(function(tool)
    if not tool or not tool:IsA("Tool") then return end
    if tool.Name:lower():find("brainrot") then
        stopRunMode()
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ—Å–ø–∞—É–Ω–∞
player.CharacterAdded:Connect(function(newCharacter)
    Character = newCharacter
    task.wait(1)
    Humanoid = Character:WaitForChild("Humanoid", 10)
    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart", 10)
    
    hitboxDisabled = false
    
    if IS_ACTIVE then
        local tool = Backpack:FindFirstChildOfClass("Tool")
        if tool and tool.Name:lower():find("brainrot") then
            task.wait(2)
            startRunMode()
        end
    end
    
    -- –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    if ScreenGui then ScreenGui.Parent = player.PlayerGui end
end)

print("üéØ Brainrot Ultimate Anti-Hit –∑–∞–≥—Ä—É–∂–µ–Ω!")
print("üõ°Ô∏è CanCollide=false, CanTouch=false, CanQuery=false")
print("üö´ –ù–µ—É—è–∑–≤–∏–º –∫ –ª—É—á–∞–º, —Ö–∏—Ç–±–æ–∫—Å–∞–º –∏ –∫–æ–ª–ª–∏–∑–∏—è–º")
print("üìç –õ–ö–ú - —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å —Ä–∞–¥–∏—É—Å–æ–º 30 studs")
